angular.module("chess",["chess.services","chess.controllers","chess.directives","ui.bootstrap"]).config([function(){}]),angular.module("chess.controllers",[]),angular.module("chess.controllers").controller("mainController",["$scope",function(){}]),angular.module("chess.directives",["chess.services"]),angular.module("chess.directives").directive("chessSquareDirective",function(){return{require:"^chessBoardDirective",replace:!0,transclude:!1,scope:{x:"@",y:"@",piece:"?="},template:' <div 	ng-class="cssClasses"  > 	<img ng-if="!isEmpty" src="imgSource()" draggable="true"></img> </div>',link:function(e,i,s,n){e.x=parseInt(e.x),e.y=parseInt(e.y),e.isEmpty=void 0!==e.piece,e.imgSource=function(){return e.isEmpty?void 0:"/imgs/"+piece.name+"_"+piece.color+".svg"},n.registerSquareScope(e,x,y),e.cssClasses={blackSquare:(x+y)%2===0,whiteSquare:!black},i.on("drop",function(i){var s=i.target.dataTransfer;n.tryMove(s.piece,e.x,e.y)})}}}).directive("chessBoardDirective",["chessPositionService",function(){return{replace:!0,transclude:!1,scope:{position:"?="},template:"",controller:["$scope",function(){this.squareScopes=[],this.registerSquareScope=function(e,i,s){this.squareScopes[8*s+i]=e},this.tryMove=function(){}}]}}]),angular.module("chess.services",[]),angular.module("chess.services").service("chessPieceService",function(){return function(){var e=this;this.types={KING:"king",QUEEN:"queen",ROOK:"rook",BISHOP:"bishop",KNIGHT:"knight",PAWN:"pawn"},this.colors={WHITE:"white",BLACK:"black"};var i=function(e,i,s,n){this.name=e,this.color=i,this.x=s,this.y=n};this.new=function(s,n,r,o){if(void 0===e.types[s])throw"Unknown piece name :"+s;if(void 0===e.colors[n])throw"Unknown color :"+n;if(0>r||r>7||0>o||o>7)throw"Position unauthorized : ("+r+","+o+")";return new i(s,n,r,o)},this.setPosition=function(e,i){if(0>e||e>7||0>i||i>7)throw"Position unauthorized : ("+e+","+i+")";this.x=e,this.y=i}}}),angular.module("chess.services").provider("chessPositionService",["chessPieceService",function(e){var i=[],s=!1;this.setPosition=function(e){i=e,s=!0};var n=function(e){var s=e.x,n=e.y;indice=8*n+s,i[indice]=e},r=function(){if(!s){var i;for(i=0;8>i;i++)n(e.new(e.PAWN),e.WHITE,i,1),n(e.new(e.PAWN),e.BLACK,i,6);for(i in[0,7])n(e.new(e.ROOK),e.WHITE,i,0),n(e.new(e.ROOK),e.BLACK,i,7);for(i in[2,5])n(e.new(e.BISHOP),e.WHITE,i,0),n(e.new(e.BISHOP),e.BLACK,i,7);for(i in[1,6])n(e.new(e.KNIGHT),e.WHITE,i,0),n(e.new(e.KNIGHT),e.BLACK,i,7);n(e.new(e.QUEEN),e.QUEEN,3,0),n(e.new(e.QUEEN),e.QUEEN,3,7),n(e.new(e.KING),e.QUEEN,4,0),n(e.new(e.KING),e.QUEEN,4,7)}};this.$get=function(){r();return new chessPositionService}}]);